tinymce.PluginManager.add("charCounter",function(e){var t=this;function n(){e.theme.panel.find("#charCounter").text(["Символов: {0}",t.getCount()])}e.on("init",function(){var a=e.theme.panel&&e.theme.panel.find("#statusbar")[0];a&&window.setTimeout(function(){a.insert({type:"label",name:"charCounter",text:["Символов: {0}",t.getCount()],style:"margin-right: 10px;",classes:"wordcount",disabled:e.settings.readonly},0),e.on("setcontent beforeaddundo keyup",n)},0)}),t.getCount=function(){var t,n,a=e.getContent({format:"raw"});return(t=a,(n=document.createElement("textarea")).innerHTML=t,n.value).replace(/(<([^>]+)>)/gi,"").replace(/\s/g,"").length}});